# Microservices cache


–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º FirstLevelCache –¥–ª—è —Ñ—É–Ω–∫—Ü–∏—è update, create

  –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª   EntityFirstLevelCache –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 
–ù–∞—á–∞–ª–æ HTTP-–∑–∞–ø—Ä–æ—Å–∞
‚îÇ
‚ñº
–°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π EntityFirstLevelCache (–ø—É—Å—Ç–æ–π)
‚îÇ
‚ñº
–í —Ç–µ—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –º–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç:
- put(key, value)  ‚îÄ‚îÄ‚ñ∂ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–µ—à
- get(key)         ‚îÄ‚îÄ‚ñ∂ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–µ—à–∞
  ‚îÇ
  ‚ñº
  –ö–æ–Ω–µ—Ü HTTP-–∑–∞–ø—Ä–æ—Å–∞
  ‚îÇ
  ‚ñº
  EntityFirstLevelCache —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è üóëÔ∏è
  (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è) 

```markdown
# –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏ List –∏ Form –≤ CXBOX

## –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
- **Frontend** - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å
- **Backend** - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å  
- **CXBOX Core** - —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
- **CustomDao** - DAO, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–π `AbstractAnySourceBaseDAO`

### –ë–∞–∑–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:
- **FirstLevelCache** - –∫—ç—à –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
- **RowMeta** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- **Pagination** - –ø–∞–≥–∏–Ω–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## –í–∏–¥–∂–µ—Ç List (–°–ø–∏—Å–æ–∫)

### –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ —Å–ø–∏—Å–∫–∞

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:**
```mermaid
sequenceDiagram
    Frontend->>Backend: GET /api/v1/count
    Note over Backend: –¢–æ–ª—å–∫–æ –¥–ª—è pagination: nextAndPreviousWithCount
    Frontend->>Backend: GET /api/v1/row-meta
    Frontend->>Backend: GET /api/v1/data/
    Frontend->>Backend: GET /api/v1/row-meta/id
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–ª—è —Å–ø–∏—Å–∫–∞ –±–µ—Ä–µ—Ç—Å—è `id` –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏, —Ç–∞–∫ –∫–∞–∫ –∫—É—Ä—Å–æ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å
- –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∑–∞–ø–∏—Å—å—é —Ç—Ä–µ–±—É–µ—Ç—Å—è `rowMeta`
- –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ –±–µ–∑ `id`

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–ø–∏—Å—è–º–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (Create)

**–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** Create, Save

**–ü—Ä–æ—Ü–µ—Å—Å:**
```mermaid
sequenceDiagram
    Frontend->>Backend: GET /api/v1/row-meta-new
    Frontend->>Backend: PUT /api/v1/data/id
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getId()` (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FirstLevelCache)
- `getByIdIgnoringFirstLevelCache()`
- `setId()` (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FirstLevelCache)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º CXBOX –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∏ –≤—ã–∑–æ–≤–∞ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.

#### –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (Delete)

**–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** Delete

**–ü—Ä–æ—Ü–µ—Å—Å:**
```mermaid
sequenceDiagram
    Frontend->>Backend: DELETE /api/v1/data/id
    Frontend->>Backend: GET /api/v1/data/
    Frontend->>Backend: GET /api/v1/row-meta
    Frontend->>Backend: GET /api/v1/row-meta/id
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã:**
- `delete()`
- `getList()`
- `getByIdIgnoringFirstLevelCache()`

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é (‚Ä¶)

**–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ù–∞–∂–∞—Ç–∏–µ "‚Ä¶"

**–ü—Ä–æ—Ü–µ—Å—Å:**
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `getByIdIgnoringFirstLevelCache()`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: `GET /api/v1/row-meta/id`

#### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ù–∞–∂–∞—Ç–∏–µ "assoc"
- "Force Active"
- "Edit"
- –ü–æ–¥–Ω—è—Ç–∏–µ "Form Popup"

**–ü—Ä–æ—Ü–µ—Å—Å:**
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `getByIdIgnoringFirstLevelCache()`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: `GET /api/v1/row-meta/id`

## –í–∏–¥–∂–µ—Ç Form (–§–æ—Ä–º–∞)

### –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ —Ñ–æ—Ä–º—ã

**–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ —Å–µ–º–µ–π—Å—Ç–≤–∞ Form widget

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:**
```mermaid
sequenceDiagram
    Frontend->>Backend: GET /api/v1/row-meta
    Frontend->>Backend: GET /api/v1/data/
    Frontend->>Backend: GET /api/v1/row-meta/id
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getList()` (–ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π)
- `getByIdIgnoringFirstLevelCache()`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ –±–µ–∑ `id`

## API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:

| –ú–µ—Ç–æ–¥ | Endpoint | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|----------|-------------|
| GET | `/api/v1/count` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π |
| GET | `/api/v1/row-meta` | –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö |
| GET | `/api/v1/row-meta-new` | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ |
| GET | `/api/v1/row-meta/id` | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ |
| GET | `/api/v1/data/` | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| PUT | `/api/v1/data/id` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ |
| DELETE | `/api/v1/data/id` | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ |

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FirstLevelCache –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Å–ø–∏—Å–∫–æ–≤:** –í—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å–µ–π
3. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** RowMeta –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏
4. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–∂–∏–º—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö
```

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å:
- –ß–µ—Ç–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π —Ä–∞–∑–¥–µ–ª–æ–≤
- –î–∏–∞–≥—Ä–∞–º–º–∞–º–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
- –¢–∞–±–ª–∏—Ü–∞–º–∏ –¥–ª—è API endpoints
- –í—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏ –∫–æ–¥–∞ –∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π
- –õ–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ MkDocs –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏.